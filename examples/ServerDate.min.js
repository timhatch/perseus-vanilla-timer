"use strict";var ServerDate=function(t){var e=Date.now(),n=document.getElementsByTagName("script"),o=n[n.length-1].src,i,a,r,s,f=null,c=false;function u(){return this?u:u.toString()}u.parse=Date.parse;u.UTC=Date.UTC;u.now=function(){return Date.now()+s};["toString","toDateString","toTimeString","toLocaleString","toLocaleDateString","toLocaleTimeString","valueOf","getTime","getFullYear","getUTCFullYear","getMonth","getUTCMonth","getDate","getUTCDate","getDay","getUTCDay","getHours","getUTCHours","getMinutes","getUTCMinutes","getSeconds","getUTCSeconds","getMilliseconds","getUTCMilliseconds","getTimezoneOffset","toUTCString","toISOString","toJSON"].forEach(function(t){u[t]=function(){return new Date(u.now())[t]()}});u.getPrecision=function(){if(typeof f.precision!="undefined")return f.precision+Math.abs(f-s)};u.amortizationRate=25;u.amortizationThreshold=2e3;Object.defineProperty(u,"synchronizationIntervalDelay",{get:function(){return i},set:function(t){i=t;clearInterval(a);a=setInterval(h,u.synchronizationIntervalDelay);m("Set synchronizationIntervalDelay to "+t+" ms.")}});u.synchronizationIntervalDelay=60*60*1e3;function g(t,e){this.value=t;this.precision=e}g.prototype.valueOf=function(){return this.value};g.prototype.toString=function(){return this.value+(typeof this.precision!="undefined"?" +/- "+this.precision:"")+" ms"};function l(t){var e="Set target to "+String(t),n;if(f)e+=" ("+(t>f?"+":"-")+" "+Math.abs(t-f)+" ms)";f=t;m(e+".");n=Math.abs(f-s);if(n>u.amortizationThreshold){m("Difference between target and offset too high ("+n+" ms); skipping amortization.");s=f}}function h(){var t=1,e,n,i;function a(){var t=new XMLHttpRequest;t.open("GET",o+"?noCache="+Date.now());t.onreadystatechange=function(){if(this.readyState==this.HEADERS_RECEIVED&&this.status==200)n=Date.now()};t.onload=function(){if(this.status==200){try{r(new Date(this.getResponseHeader("Date")).getTime())}catch(t){m("Unable to read the server's response.")}}};e=Date.now();t.send()}function r(o){var r=(n-e)/2,s=new g(o+r-n,r);m("sample: "+t+", offset: "+String(s));if(t==1||r<=i.precision)i=s;if(t<10){t++;a()}else{l(i);c=false}}if(!c){c=true;setTimeout(function(){c=false},10*1e3);a()}}function m(t){if(console&&console.log){console.log("[ServerDate] "+t)}}s=t-e;if(typeof performance!="undefined"){r=(e-performance.timing.domLoading)/2;s+=r}l(new g(s,r));setInterval(function(){var t=Math.max(-u.amortizationRate,Math.min(u.amortizationRate,f-s));s+=t;if(t)m("Offset adjusted by "+t+" ms to "+s+" ms (target: "+f.value+" ms).")},1e3);window.addEventListener("pageshow",h);h();return u}(Date.now());